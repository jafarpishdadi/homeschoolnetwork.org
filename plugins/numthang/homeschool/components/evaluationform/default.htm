{%  set course = evaluations.course[0] %}
{%  set evaluation = evaluations.evaluation[0] %}
{%  set evaluations = evaluations.evaluations %}

<form data-request="onSave">
	<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
	<link id="bsdp-css" href="https://uxsolutions.github.io/bootstrap-datepicker/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet">
	<script src="https://uxsolutions.github.io/bootstrap-datepicker/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
	<script type="text/javascript">
	$.fn.datepicker.defaults.format = "dd/mm/yyyy";
	</script>
	<script src="//cdn.tinymce.com/4/tinymce.min.js"></script>
	<div class="row">
		<div class="col-md-6">
			<label>{{ 'Evaluation'|_ }}</label><br>
			<div class="btn-group" style="width:100%;">
	      <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle" type="button" style="width:100%; text-align:left;">&nbsp; <span class="fui-new"></span> {{ 'Select Evaluation'|_ }} <span class="caret"></span></button>
	      <ul role="menu" class="dropdown-menu" style="width:100%;">
					<li><a href="/login/new/evaluation"><span class="fui-new"></span> {{ 'New Evaluation'|_ }}</a></li>
					{% for c in evaluations %}
					<li><b>&nbsp;
						{% if c.template %}
							[ {{ 'Template'|_ }} ]
						{% else %}
							[ {{ c.created_at|date("m/d/Y") }} ]
						{% endif %}
					 	{{ c.name }}</b>
						{% for e in c.evaluations %}
							<a href="/login/edit/evaluation/{{ e.id }}"> <span class="fui-new"></span> {{ 'Evaluation'|_ }} : {{ e.name }}</a>
						{% endfor %}
					</li>
					<li class="divider"></li>
					{% endfor %}
	      </ul>
	    </div>
		</div>
		<div class="col-md-6">
			<label>{{ 'Courses'|_ }} </label>
			<select class="form-control select select-primary" data-toggle="select" name="course_id" style="width:100%">
				<option value="">{{ 'Select Course'|_ }}</option>
				{% for e in evaluations %}
					{% if e.template == 0 or can('edit_course_template') %}
					<option value="{{ e.id }}" {{ course.id == e.id ? 'selected' : '' }}>{{ e.name }}</option>
					{% endif %}
				{% endfor %}
			</select>
		</div>
	</div>

  <input type="hidden" name="user_id" value="{{ user.id }}">
  <div class="row">
    <div class="col-sm-6">
      <div class="form-group {% if errors.first('name') %} has-error {% endif %}">
        <label>ชื่อแบบประเมิน</label>
        <input type="text" class="form-control" name="name" placeholder="Enter course name : {{ errors.first('name') }}" value="{{ evaluation.name }}">
        {% if errors.first('name') %}<div class="alert alert-warning" style="margin-top:4px;">{{ errors.first('name') }}</div>{% endif %}
      </div>
    </div>
    <div class="col-sm-6">
      <div class="form-group {% if errors.first('hs_name') %} has-error {% endif %}">
        <label>ชื่อบ้านเรียน</label>
        <input type="text" class="form-control" name="hs_name" placeholder="Enter homeschool name : " value="{{ course.hs_name }}" readonly>
        {% if errors.first('hs_name') %}<div class="alert alert-warning" style="margin-top:4px;">{{ errors.first('hs_name') }}</div>{% endif %}
      </div>
    </div>
  </div>
  <div class="board-inner">
    <div class="accordion">
      <dl>
        <dt><a class="accordionTitle" href="#">1. ข้อมูลพื้นฐานของครอบครัว</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
            <div class="col-sm-4">
              <div class="form-group">
                <label>บิดา</label>
                <input type="text" class="form-control" name="father_name" placeholder="Enter father's name" value="{{ this.page.father_name }}" readonly>
              </div>
            </div>
            <div class="col-sm-8">
              <div class="form-group">
                <label>วุฒิการศึกษา</label>
                <input type="text" class="form-control" name="father_degree" placeholder="Enter father's degree" value="{{ this.page.father_degree }}" readonly>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label>ประสบการณ์</label>
                <textarea class="form-control" name="father_exp" placeholder="Enter father's experience" rows="5" readonly>{{ this.page.father_exp }}</textarea>
              </div>
            </div>
            <div class="col-sm-2">
              <div class="form-group">
                <label>อายุ</label>
                <input type="text" class="form-control" name="father_age" placeholder="Age" value="{{ this.page.father_age }}" readonly>
              </div>
            </div>
            <div class="col-sm-10">
              <div class="form-group">
                <label>อาชีพ</label>
                <input type="text" class="form-control" name="father_job" placeholder="Enter father's job"  value="{{ this.page.father_job }}" readonly>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label>ท่ี่อยู่</label>
                <input type="text" class="form-control" name="father_addr" placeholder="Enter father's address" value="{{ this.page.father_addr }}" readonly>
              </div>
            </div>

            <div class="col-sm-4">
              <div class="form-group">
                <label>มารดา</label>
                <input type="text" class="form-control" name="mother_name" placeholder="Enter mother's name" value="{{ this.page.mother_name }}" readonly>
              </div>
            </div>
            <div class="col-sm-8">
              <div class="form-group">
                <label>วุฒิการศึกษา</label>
                <input type="text" class="form-control" name="mother_degree" placeholder="Enter mother's degree" value="{{ this.page.mother_degree }}" readonly>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label>ประสบการณ์</label>
                <textarea class="form-control" name="mother_exp" placeholder="Enter mother's experience" rows="5" readonly>{{ this.page.mother_exp }}</textarea>
              </div>
            </div>
            <div class="col-sm-2">
              <div class="form-group">
                <label>อายุ</label>
                <input type="text" class="form-control" name="mother_age" placeholder="Age" value="{{ this.page.mother_age }}" readonly>
              </div>
            </div>
            <div class="col-sm-10">
              <div class="form-group">
                <label>อาชีพ</label>
                <input type="text" class="form-control" name="mother_job" placeholder="Enter mother's job" value="{{ this.page.mother_job }}" readonly>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label>ที่อยู่</label>
                <input type="text" class="form-control" name="mother_addr" placeholder="Enter mother's address" value="{{ this.page.mother_addr }}" readonly>
              </div>
            </div>
          </div>
        </dd>
        <dt><a href="#" class="accordionTitle">2. ข้อมูลพื้นฐานของผู้เรียน</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          2.1 ระบุข้อมูลของผู้เรียน
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label>ชื่อ-สกุล</label>
                <input type="text" class="form-control" name="student_name" placeholder="Enter student's name" value="{{ course.student_name }}" readonly>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label>วัน เดือน ปี เกิด</label>
                <div class="input-group date" data-provide="datepicker">
                  <input type="text" class="form-control" name="birth_date" value="{{ this.page.birth_date }}" readonly>
                    <div class="input-group-addon">
                      <span class="fui-calendar"></span>
                    </div>
                </div>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group">
                <label>ประวัติการศึกษา (กรณีเรียนในระบบโรงเรียนมาก่อน)</label>
                <textarea class="form-control" name="school_exp" placeholder="Enter school's experience" rows="5" readonly>{{ course.school_exp }}</textarea>
              </div>
            </div>
          </div>
          2.2 พัฒนาการของผู้เรียน (ระบุการพัฒนาการของผู้เรียน/ความสามารถพิเศษ/ความ
    ต้องการพิเศษ)
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group">
                <textarea class="form-control" name="development" placeholder="" rows="10" readonly>{{ course.development }}</textarea>
              </div>
            </div>
          </div>
        </dd>
        <dt><a href="#" class="accordionTitle">3. ผลการจัดการเรียนรู้</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group" style="padding:2px;">
                <textarea class="form-control my-editor" name="learning" placeholder="" rows="20">{% if evaluation.learning is defined %} {{ evaluation.learning }} {% else %} {{ this.page['default_3'] }} {% endif %}</textarea>
              </div>
            </div>
          </div>
        </dd>
        <dt><a href="#" class="accordionTitle">4. สรุปผลการเรียนรู้ของผู้เรียนตามเกณฑ์การจบชั้นเรียน</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
          <div class="col-sm-12">
            <div class="form-group" style="padding:2px;">
              <textarea class="form-control my-editor" name="summary" placeholder="ระบุความต้องการ เช่น ต้องการพึ่งตนเอง ลดค่าใช้จ่าย เป็นต้น" rows="20">{% if evaluation.summary is defined %} {{ evaluation.summary }} {% else %} {{ this.page['default_4'] }} {% endif %}</textarea>
            </div>
          </div>
        </div>
        </dd>
        <dt><a href="#" class="accordionTitle">5. จุดเด่น / ความสำเร็จที่สำคัญของการจัดการศึกษา</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group" style="padding:2px;">
                <textarea class="form-control my-editor" name="successful" placeholder="" rows="20">{% if evaluation.successful is defined %} {{ evaluation.successful }} {% else %} {{ this.page['default_5'] }} {% endif %}</textarea>
              </div>
            </div>
          </div>
        </dd>
        <dt><a href="#" class="accordionTitle">6. ปัญหา, อุปสรรคหรือสิ่งที่ควรพัฒนา</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group" style="padding:2px;">
								<textarea class="form-control my-editor" name="problem" placeholder="" rows="20">{% if evaluation.problem is defined %} {{ evaluation.problem }} {% else %} {{ this.page['default_6'] }} {% endif %}</textarea>
              </div>
            </div>
          </div>
        </dd>
        <dt><a href="#" class="accordionTitle">7. แนวทางการจัดการเรียนรู้ในปีต่อไป</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group" style="padding:2px;">
                <textarea class="form-control my-editor" name="next" placeholder="" rows="20">{% if evaluation.next is defined %} {{ evaluation.next }} {% else %} {{ this.page['default_7'] }} {% endif %}</textarea>
              </div>
            </div>
          </div>
        </dd>
        <dt><a href="#" class="accordionTitle">8. ข้อคิดเห็น / ข้อเสนอแนะอื่น ๆ</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group" style="padding:2px;">
                <textarea class="form-control my-editor" name="suggestion" placeholder="" rows="20">{% if evaluation.suggestion is defined %} {{ evaluation.suggestion }} {% else %} {{ this.page['default_7'] }} {% endif %}</textarea>
              </div>
            </div>
          </div>
        </dd>
        <dt><a href="#" class="accordionTitle">9. ภาคผนวก ร่องรอยการเรียนรู้</a></dt>
        <dd class="accordionItem accordionItemCollapsed">
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group" style="padding:2px;">
                <textarea class="form-control my-editor" name="footprint" placeholder="" rows="40">{% if evaluation.footprint is defined %} {{ evaluation.footprint }} {% else %} {{ this.page['default_7'] }} {% endif %}</textarea>
              </div>
            </div>
          </div>
        </dd>
      </dl>
    </div>
    <script src="{{ ['assets/js/accordion.js']|theme }}"></script>
		<script>
			var editor_config = {
				path_absolute : "/",
				selector: "textarea.my-editor",
				plugins: [
					"advlist autolink lists link image charmap print preview hr anchor pagebreak",
					"searchreplace wordcount visualblocks visualchars code fullscreen",
					"insertdatetime media nonbreaking save table contextmenu directionality",
					"emoticons template paste textcolor colorpicker textpattern"
				],
				toolbar: "fontsizeselect forecolor backcolor | bold italic underline | alignleft aligncenter alignright | bullist numlist | outdent indent | superscript",
				templates: [
					{title: 'Some title 1', description: 'Some desc 1', content: 'My content'},
					{title: 'Some title 2', description: 'Some desc 2', url: 'development.html'}
				],
				relative_urls: false,
				file_browser_callback : function(field_name, url, type, win) {
					var x = window.innerWidth || document.documentElement.clientWidth || document.getElementsByTagName('body')[0].clientWidth;
					var y = window.innerHeight|| document.documentElement.clientHeight|| document.getElementsByTagName('body')[0].clientHeight;

					var cmsURL = editor_config.path_absolute + 'laravel-filemanager?field_name=' + field_name;
					if (type == 'image') {
						cmsURL = cmsURL + "&type=Images";
					} else {
						cmsURL = cmsURL + "&type=Files";
					}

					tinyMCE.activeEditor.windowManager.open({
						file : cmsURL,
						title : 'Filemanager',
						width : x * 0.8,
						height : y * 0.8,
						resizable : "yes",
						close_previous : "no"
					});
				}
			};
			tinymce.init(editor_config);
		</script>
    <div class="clearfix"></div>
  </div>
  <div class="row">
    <div class="col-sm-6">
    	<input type="hidden" name="save_as" value="0">
			{% if course.template == 0 or can('edit_course_template') %}
      	<button type="submit" class="btn btn-lg btn-default">{{ 'Save'|_ }}</button>
      {% endif %}
      {% if evaluation.id is defined %}
		    <button type="submit" class="btn btn-lg btn-info" onClick="if(confirm('{{ 'Save as'|_ }} '+this.form.name.value)) this.form.save_as.value = 1; else return false;">{{ 'Save as'|_ }} ...</button>
				{% if course.template == 0 or can('edit_course_template') %}
				  <button type="button" data-request="onDelete" data-request-confirm="Are you sure?" class="btn btn-lg btn-danger">{{ 'Remove'|_ }}</button>
		    {% endif %}
      {% endif %}
    </div>
  </div>
  <br>
</form>
