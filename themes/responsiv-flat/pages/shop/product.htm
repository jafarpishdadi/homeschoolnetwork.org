title = "Product"
url = "/product/:slug"
layout = "default"
is_hidden = 0
robot_index = "index"
robot_follow = "follow"

[CategoryPage]
slug = "{{ :category }}"
slug_required = 0
smart_url_check = 0

[CategoryPage MainCategoryPage]
slug = "{{ :main_category }}"
slug_required = 0
smart_url_check = 0

[ProductPage]
slug = "{{ :slug }}"
slug_required = 1
smart_url_check = 0
==
{% set obProduct = ProductPage.get() %}
{% set obMainCategory = MainCategoryPage.get() %}
{% set obCategory = CategoryPage.get() %}
{% set obOfferFirst = obProduct.offer.first() %}
{% set obOfferList = obProduct.offer.all() %}
{% put styles %}
  <link href="{{ [
      'assets/vendor/slick/slick.css',
  ]|theme }}" rel="stylesheet">
{% endput %}
{% put scripts %}
  <script src="{{ [
      'assets/vendor/slick/slick.js',
  ]|theme }}"></script>
  <script>
      $(document).ready(function() {
          $('#shopImages').slick({
              dots: true,
              infinite: true,
              speed: 500,
              fade: true,
              cssEase: 'linear',
              slidesToShow: 1,
              autoplay: true,
              autoplaySpeed: 2000,
              pauseOnHover: true,
              arrows: false
          });
      })
  </script>
  <script src="{{ [
    'assets/js/shop/button-add-to-cart.js',
    ]|theme }}"></script>
{% endput %}

<section id="layout-title">
  <div class="container">
    <h3>{{ obProduct.name }}</h3>
  </div>
</section>
<div class="container shop-item" data-id="{{ obProduct.id }}">
    <div class="row">
        <div class="col-sm-9">
          <div class="row">
              <div class="col-sm-6">
                <div id="shopImages" class="shop-images">
                  {% if obProduct.images is not empty %}
                    {% for obImage in obProduct.images %}
                      <div>
                        <img src="{{ obImage.path }}" title="{{ obImage.title }}" alt="{{ obImage.description }}"  class="img-responsive main">
                      </div>
                    {% endfor %}
                  {% else %}
                    <div class="carousel-item product-detailed__carousel-item active h-100">
                      <img class="d-block w-100 h-100 product-detailed__carousel-item-img" src="{{ 'assets/images/no-image.png'|theme }}">
                    </div>
                  {% endif %}
                </div>

              </div>
              <div class="col-sm-6">
                <p class="text-muted">{{ obProduct.description|raw}}</p>
                <span>Category: {{ obProduct.category.name }}</span><br>
                <ul class="rating list-inline">
                    <li><i class="fa fa-star"></i></li>
                    <li><i class="fa fa-star"></i></li>
                    <li><i class="fa fa-star"></i></li>
                    <li><i class="fa fa-star"></i></li>
                    <li><i class="fa fa-star"></i></li>
                </ul>
                <span class="text-muted reviews">(12 reviews)</span>
                <form>
                  <div>
                    <div class="price-block">
                      <span class="price"><span id="offer_price">{{ obOfferFirst.price }}</span> THB x</span>
                      <input type="number" name="quantity" value="1" class="form-control" min="1" max="{{obOffer.quantity}}" maxlength="2">
                    </div>
                  </div>
                  <input type="hidden" name="offer_id" id="offer_id" value="">
                  {% for obOffer in obOfferList %}
                    <input type="radio" name="ooo" value="{{ obOffer.id }}" onclick="document.getElementById('addtocart').disabled = false; document.getElementById('offer_id').value='{{ obOffer.id }}'; document.getElementById('offer_price').innerHTML='{{ obOffer.price }}';"  data-ajax="updateOfferPrice">
                    {{ obOffer.name }}
                  {% endfor %}
                  <br>
                  <button class="btn btn-lg btn-add-to-cart btn-info" type="button" id="addtocart" data-placement="top" disabled>
                    <i class="fa fa-shopping-cart"></i> {{ 'Add to cart'|_ }}
                  </button>
                </form>
              </div>
          </div>
        </div>
        <div class="col-sm-3">
          {# partial 'shop/sidebar' #}
        </div>
    </div>
</div>
